{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_list %}

{% block title %}{{ title }} | Django Admin{% endblock %}

{% block content %}
<div class="content-main">
    <div class="form-row">
        <div class="danger-zone" style="background: #fff; border: 1px solid #ddd; padding: 20px; margin: 20px 0; border-radius: 4px;">
            <h1 style="color: #ba2121;">‚ö†Ô∏è {{ title }}</h1>
            
            <p><strong>You are about to permanently delete {{ count }} member{{ count|pluralize }}:</strong></p>
            
            <div style="background: #f8f8f8; padding: 15px; border-left: 4px solid #ba2121; margin: 15px 0;">
                <strong>Members to be deleted:</strong><br>
                {{ names_preview }}
            </div>
            
            <div style="background: #fff2cd; border: 1px solid #d6c441; padding: 15px; border-radius: 4px; margin: 15px 0;">
                <strong>‚ö†Ô∏è WARNING:</strong> This action cannot be undone! 
                <ul style="margin: 10px 0 0 20px;">
                    <li>All member data will be permanently removed</li>
                    <li>Any associated membership history will be lost</li>
                    <li>This cannot be reversed</li>
                </ul>
            </div>
            
            <form method="post" style="margin-top: 20px;">
                {% csrf_token %}
                
                <!-- Pass through the selected member IDs -->
                {% for member in members %}
                <input type="hidden" name="_selected_action" value="{{ member.pk }}">
                {% endfor %}
                
                <input type="hidden" name="action" value="delete_selected_members">
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" name="confirm_delete" value="yes" 
                            style="background: #ba2121; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;"
                            onclick="return confirm('Are you absolutely sure? This will permanently delete {{ count }} member{{ count|pluralize }}.')">
                        üóëÔ∏è Yes, Delete {{ count }} Member{{ count|pluralize }}
                    </button>
                    
                    <a href="{% url 'admin:members_member_changelist' %}" 
                       style="background: #6c757d; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block;">
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
// Add some extra confirmation for safety
document.querySelector('button[name="confirm_delete"]').addEventListener('click', function(e) {
    const confirmed = confirm(
        'FINAL CONFIRMATION:\n\n' +
        'You are about to permanently delete {{ count }} member{{ count|pluralize }}.\n' +
        'This action CANNOT be undone.\n\n' +
        'Are you absolutely certain?'
    );
    if (!confirmed) {
        e.preventDefault();
    }
});
</script>
{% endblock %}