{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<div class="container aps-container block-content">
    <h1 class="main-page-header">Symposium Proceedings Archive</h1>

    {% if page.intro_text %}
        <div class="intro-text mb-4">
            {{ page.intro_text|richtext }}
        </div>
    {% endif %}

    <div class="row proceedings-grid">
        {% for item in proceedings %}
            <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                <div class="proceedings-item">
                    {% if item.cover_image and item.program_book %}
                        <a href="{{ item.program_book.url }}" target="_blank" class="proceedings-image-link">
                            {% image item.cover_image max-300x400 as cover %}
                            <img src="{{ cover.url }}" alt="APS {{ item.symposium_year }} Cover" class="proceedings-img img-fluid aps-img">
                        </a>
                    {% elif item.cover_image %}
                        {% image item.cover_image max-300x400 as cover %}
                        <img src="{{ cover.url }}" alt="APS {{ item.symposium_year }} Cover" class="proceedings-img img-fluid aps-img">
                    {% endif %}

                    <div class="proceedings-info">
                        <h3 class="proceedings-year">APS {{ item.symposium_year }}</h3>

                        {% if item.symposium_theme %}
                            <p class="proceedings-theme">{{ item.symposium_theme }}</p>
                        {% endif %}

                        <p class="proceedings-venue">{{ item.symposium_venue }}</p>

                        {% if item.symposium_chair_1_name or item.symposium_chair_2_name or item.symposium_chair_3_name %}
                            <div class="proceedings-chairs">
                                <strong>Chair{% if item.symposium_chair_2_name %}s{% endif %}:</strong>
                                <div class="chair-list">
                                    {% if item.symposium_chair_1_name %}
                                        <span class="chair-name">{{ item.symposium_chair_1_name }}</span>
                                    {% endif %}
                                    {% if item.symposium_chair_2_name %}
                                        <span class="chair-name">{{ item.symposium_chair_2_name }}</span>
                                    {% endif %}
                                    {% if item.symposium_chair_3_name %}
                                        <span class="chair-name">{{ item.symposium_chair_3_name }}</span>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
<style>
/* 4-Column Proceedings Grid */
.proceedings-grid {
    margin-top: 2rem;
}

.proceedings-item {
    margin-bottom: 1.5rem;
}

.proceedings-img {
    display: block;
    margin: 0;
    max-width: 100%;
    height: auto;
}

.proceedings-image-link:hover .proceedings-img {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.proceedings-info {
    padding: 1rem 0.5rem;
    text-align: left;
}

.proceedings-year {
    font-size: 1.25rem;
    font-weight: 600;
    color: #1D3557;
    margin: 0.75rem 0 0.5rem;
}

.proceedings-theme {
    font-weight: 500;
    color: #FF7F11;
    margin: 0.5rem 0;
    font-size: 0.95rem;
    line-height: 1.3;
}

.proceedings-venue {
    color: #666;
    font-size: 0.9rem;
    margin: 0.5rem 0;
}

.proceedings-chairs {
    margin-top: 0.75rem;
    font-size: 0.85rem;
    color: #555;
}

.chair-list {
    margin-top: 0.25rem;
}

.chair-name {
    display: block;
    font-size: 0.85rem;
    color: #666;
    line-height: 1.4;
}

/* Responsive adjustments */
@media (max-width: 1199px) {
    .proceedings-img {
        max-height: 350px;
    }
}

@media (max-width: 991px) {
    .proceedings-year {
        font-size: 1.1rem;
    }
    
    .proceedings-theme {
        font-size: 0.9rem;
    }
}

@media (max-width: 575px) {
    .proceedings-grid .col-sm-6 {
        padding-left: 10px;
        padding-right: 10px;
    }
}

/* Remove old caption wrapper styles if they exist */
.caption-wrapper {
    display: none;
}
</style>
{% endblock %}
