{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="aps-container block-content">
  <div class="row">
    <div class="col-md-12">
      <h1 class="main-page-header">APS Research & News Archive</h1>
      
      <!-- Enhanced Category Filter Navigation -->
      <div class="category-filter-section mb-4">
        <div class="d-flex flex-wrap justify-content-start gap-2">
          <a href="{{ page.url }}" 
             class="category-filter-btn {% if not selected_category %}active{% endif %} fw-bold"
             data-category="all">
            <span class="filter-label">ALL</span>
            <span class="filter-count">| {{ total_count|default:"0" }} |</span>
          </a>
          
          {% for cat in categories %}
            <a href="?category={{ cat.name }}" 
               class="category-filter-btn {% if selected_category == cat.name %}active{% endif %} fw-bold"
               data-category="{{ cat.name|lower }}">
              <span class="filter-label">{{ cat.name|upper }}</span>
              <span class="filter-count">| {{ cat.item_count|default:"0" }} |</span>
            </a>
          {% endfor %}
        </div>
        
        {% if selected_category %}
          <div class="selected-category-info mt-3">
            <p class="text-muted text-center">
              <i class="fas fa-filter"></i> 
              Showing <strong>{{ selected_category }}</strong> articles
              <a href="{{ page.url }}" class="ms-2 text-decoration-none">
                <i class="fas fa-times-circle"></i> Clear filter
              </a>
            </p>
          </div>
        {% endif %}
      </div>



    </div>
  </div>

  <div class="col-md-12 inside">
    {% for row in news_rows %}
      <div class="row people">
        {% for item in row %}
          <div class="col-md-2 text-left">
            <a href="{{ item.get_absolute_url }}" class="aps-archive-link">
              {% if item.news_item_image %}
                <img src="{{ item.news_item_image.file.url }}" alt="{{ item.news_item_short_title }}" class="aps-img img-fluid aps-archive-hover" />
              {% endif %}
              <p class="index-header">
                {{ item.news_item_short_title }}
              </p>
            </a>
          </div>
        {% endfor %}
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}

